(function(t){function e(e){for(var s,l,n=e[0],o=e[1],c=e[2],d=0,m=[];d<n.length;d++)l=n[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&m.push(i[l][0]),i[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var o=a[n];0!==i[o]&&(s=!1)}s&&(r.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},r=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},5465:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"max-w-screen-lg mx-auto my-10",attrs:{id:"app"}},[t.data?a("Counts",{attrs:{data:t.data.counts}}):t._e(),t.data&&t.data.articles.news?a("ArticleArea",{attrs:{list:t.data.articles.news}}):a("ArticleArea",{attrs:{list:[{category:"news"}]}}),t.data&&t.data.articles.sliders?a("ArticleArea",{attrs:{list:t.data.articles.sliders}}):a("ArticleArea",{attrs:{list:[{category:"sliders"}]}})],1)},r=[],l=(a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-16"},[a("h2",{staticClass:"text-4xl mb-4"},[t._v("Counts")]),a("div",{staticClass:"flex justify-between items-center"},t._l(Object.keys(t.data),(function(e,s){return a("CountList",{key:s,staticClass:"w-1/6",attrs:{name:e,val:t.data[e]}})})),1)])}),n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v(t._s(this.global.titles[t.name]))]),a("button",{staticClass:"btn w-full py-6 text-xl",on:{click:function(e){return t.show("counts-"+t.name)}}},[t._v(" "+t._s(t.numberFormat)+" "),a("small",[t._v(t._s(t.setunit))])]),a("SetCount",{attrs:{name:t.name,val:t.val,modalId:"counts-"+t.name}})],1)},c=[],u=(a("b0c0"),a("b680"),a("a9e3"),a("99af"),a("5319"),a("ac1f"),a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{name:t.modalId,width:"60%",height:"45%"},on:{closed:t.closed}},[a("div",{staticClass:"flex items-center absolute w-full h-full px-8 py-4 text-left"},[a("div",{staticClass:"w-full"},[a("h3",{staticClass:"w-1/2 mx-auto text-3xl mb-2"},[t._v(t._s(this.global.titles[t.name]))]),a("table",{staticClass:"w-1/2 mx-auto border-collapse bg-gray-100"},[a("tbody",[a("tr",[a("td",{staticClass:"px-4 py-2 border border-gray-400"},[a("div",{staticClass:"my-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.myval,expression:"myval"}],staticClass:"input-text block w-1/2 mx-auto",attrs:{type:"number",min:"0"},domProps:{value:t.myval},on:{input:function(e){e.target.composing||(t.myval=e.target.value)}}})])])])])]),a("button",{staticClass:"btn mx-auto block my-6",on:{click:t.submit}},[t._v("更新數據")])])])])}),d=[],m=a("bc3a"),p=a.n(m),h=a("4328"),v=a.n(h),b={props:{modalId:{type:String,required:!0},name:{trpe:String,required:!0},val:{trpe:String,required:!0}},data:function(){return{myval:this.val}},methods:{closed:function(){this.myval=this.val},submit:function(){return this.myval?this.myval<0?(alert("數據需大於0"),!1):!!confirm("確定送出嗎?")&&void p()({method:"post",url:this.global.apiPath,data:v.a.stringify({action:"setCounts",category:this.name,count:this.myval})}).then((function(t){"success"===t.data.result?(alert("更新成功"),location.reload()):(alert("更新發生錯誤"),console.log(t))})).catch((function(t){alert("更新失敗"),console.error(t)})):(alert("尚有欄位未填寫"),!1)}}},f=b,y=a("2877"),g=Object(y["a"])(f,u,d,!1,null,null,null),x=g.exports,_={components:{SetCount:x},props:{name:{trpe:String,required:!0},val:{trpe:String,required:!0}},computed:{setunit:function(){var t={kg:"KG",percent:"雙",company:"家",cleanBeach:"場",bottles:"個"};return t[this.name]},numberFormat:function(){var t=parseInt(this.val),e=0,a=".",s=",",i=t<0?"-":"",r=String(parseInt(t=Math.abs(Number(t)||0).toFixed(e))),l=(l=r.length)>3?l%3:0;return"".concat(i).concat(l?r.substr(0,l)+s:"").concat(r.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)).concat(e?a+Math.abs(t-r).toFixed(e).slice(2):"")}},methods:{show:function(t){this.$modal.show(t)}}},C=_,w=Object(y["a"])(C,o,c,!1,null,null,null),k=w.exports,j={components:{CountList:k},props:{data:{trpe:Object,required:!0}}},O=j,A=Object(y["a"])(O,l,n,!1,null,null,null),P=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-16 relative"},[a("div",{staticClass:"flex justify-between items-center"},[a("h2",{staticClass:"text-4xl mb-4"},[t._v(t._s(this.global.titles[t.list[0].category]))]),a("div",{staticClass:"px-4"},[a("button",{staticClass:"btn",on:{click:function(e){return t.show("add-"+t.list[0].category)}}},[t._v("新增")])])]),a("SetArticle",{attrs:{modalId:"add-"+t.list[0].category,category:t.list[0].category}}),t.list[0].title?a("div",[a("table",{staticClass:"w-full border-collapse"},[t._m(0),t._l(t.allocationData,(function(e,s){return a("tbody",{key:s,class:s===t.active?"table-row-group":"hidden"},t._l(e,(function(t){return a("ArticleList",{key:t.index,attrs:{list:t}})})),1)}))],2),a("div",{staticClass:"float-right mt-2"},[t._v("共"+t._s(t.list.length)+"筆")]),t.allocationData.length>1?a("div",{staticClass:"text-center mt-4"},[a("ul",{staticClass:"inline-flex"},t._l(t.allocationData,(function(e,s){return a("li",{key:s,class:s===t.active?"px-3 py-2 mx-1 text-white bg-gray-600 cursor-pointer":"px-3 py-2 mx-1 text-white bg-gray-400 cursor-pointer hover:bg-gray-600",on:{click:function(e){return t.setActive(s)}}},[t._v(" "+t._s(s+1)+" ")])})),0)]):t._e()]):a("div",[a("p",{staticClass:"py-8 text-center border border-gray-400"},[t._v("目前尚無資料")])])],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"bg-gray-600"},[a("tr",[a("th",{staticClass:"w-24 px-4 py-2 border border-gray-400 text-white"},[t._v("排序")]),a("th",{staticClass:"text-left px-4 py-2 border border-gray-400 text-white",attrs:{colspan:"2"}},[t._v("標題")])])])}],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"hover:bg-gray-100"},[a("th",{staticClass:"px-4 py-2 border border-gray-400"},[t._v(t._s(t.list.myorder))]),a("td",{staticClass:"px-4 py-2 border border-r-0 border-gray-400"},[a("div",{staticClass:"flex items-center"},["1"===t.list.ismedia?a("v-icon",{staticClass:"text-red-500 mr-2",attrs:{name:"brands/youtube",scale:"1.4"}}):t._e(),a("h5",[t._v(t._s(t.list.title))])],1)]),a("td",{staticClass:"text-right px-4 py-2 border border-l-0 w-px border-gray-400"},[a("button",{staticClass:"btn",on:{click:function(e){return t.show("article-"+t.list.id)}}},[t._v("修改")]),a("button",{staticClass:"btn",on:{click:t.deleteList}},[t._v("刪除")]),a("SetArticle",{attrs:{list:t.list,modalId:"article-"+t.list.id}})],1)])},I=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{name:t.modalId,width:"60%",height:"45%"},on:{closed:t.closed}},[a("div",{staticClass:"flex items-center absolute w-full h-full px-8 py-4 text-left"},[a("div",{staticClass:"w-full"},[a("h3",{staticClass:"text-3xl mb-2"},[t._v(t._s(this.global.titles[t.category||t.list.category]))]),a("table",{staticClass:"w-full border-collapse bg-gray-100"},[a("tbody",[a("tr",[a("td",{staticClass:"px-4 py-2 border border-gray-400 w-32"},[a("h4",[t._v("排序")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.myorder,expression:"myorder"}],staticClass:"input-text",attrs:{type:"number"},domProps:{value:t.myorder},on:{input:function(e){e.target.composing||(t.myorder=e.target.value)}}})]),a("td",{staticClass:"px-4 py-2 border border-gray-400"},[a("div",{staticClass:"my-4"},[a("h4",{staticClass:"inline-block"},[t._v("類別")]),a("label",{staticClass:"p-2 ml-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ismedia,expression:"ismedia"}],staticClass:"mr-1 text-lg transform scale-125",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.ismedia,"1")},on:{change:function(e){t.ismedia="1"}}}),t._v("影片 ")]),a("label",{staticClass:"p-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ismedia,expression:"ismedia"}],staticClass:"mr-1 text-lg transform scale-125",attrs:{type:"radio",value:"0"},domProps:{checked:t._q(t.ismedia,"0")},on:{change:function(e){t.ismedia="0"}}}),t._v("文章 ")])]),a("hr",{staticClass:"border-gray-400"}),a("div",{staticClass:"my-4"},[a("h4",[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"my-4"},[a("h4",[t._v("引言")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subtitle,expression:"subtitle"}],staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.subtitle},on:{input:function(e){e.target.composing||(t.subtitle=e.target.value)}}})]),a("div",{staticClass:"my-4"},[a("h4",[t._v("文章連結")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),a("div",{staticClass:"my-4"},[a("h4",[t._v(t._s("1"===t.ismedia?"Youtube影片編號":"圖片"))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.image,expression:"image"}],staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.image},on:{input:function(e){e.target.composing||(t.image=e.target.value)}}})])])])])]),a("button",{staticClass:"btn mx-auto block my-6",on:{click:t.submit}},[t._v("確認送出")])])])])},E=[],M={props:{list:{type:Object,default:function(){return{id:"",ismedia:"0",title:"",subtitle:"",url:"",image:"",myorder:"0"}}},category:{type:String,default:""},modalId:{type:String,required:!0}},data:function(){var t=this.list,e=t.ismedia,a=t.myorder,s=t.title,i=t.subtitle,r=t.url,l=t.image;return{ismedia:e,myorder:a,title:s,subtitle:i,url:r,image:l}},methods:{closed:function(){this.ismedia=this.list.ismedia,this.myorder=this.list.myorder,this.title=this.list.title,this.subtitle=this.list.subtitle,this.url=this.list.url,this.image=this.list.image},submit:function(){var t=this;if(!this.myorder||!this.title||!this.subtitle||!this.url||!this.image)return alert("尚有欄位未填寫"),!1;if(!confirm("確定送出嗎?"))return!1;var e=this.list.id?"update":"add";p()({method:"post",url:this.global.apiPath,data:v.a.stringify({action:e,id:this.list.id,ismedia:this.ismedia,myorder:this.myorder,title:this.title,subtitle:this.subtitle,url:this.url,image:this.image,category:this.category})}).then((function(a){"success"===a.data.result?(alert("".concat(t.global.titles[e],"成功")),location.reload()):(alert("".concat(t.global.titles[e],"發生錯誤")),console.log(a))})).catch((function(a){alert("".concat(t.global.titles[e],"失敗")),console.error(a)}))}}},L=M,D=Object(y["a"])(L,N,E,!1,null,null,null),F=D.exports,T=a("0874"),B=(a("63b9"),{components:{SetArticle:F,"v-icon":T["a"]},props:{list:{type:Object,required:!0}},methods:{show:function(t){this.$modal.show(t)},deleteList:function(){confirm("確定刪除嗎?")&&p()({method:"post",url:this.global.apiPath,data:v.a.stringify({action:"delete",id:this.list.id})}).then((function(t){"success"===t.data.result?(alert("刪除成功"),location.reload()):(alert("刪除發生錯誤"),console.log(t))})).catch((function(t){alert("刪除失敗"),console.error(t)}))}}}),J=B,G=Object(y["a"])(J,q,I,!1,null,null,null),K=G.exports,Y={components:{ArticleList:K,SetArticle:F},props:{list:{trpe:Array,required:!0}},data:function(){return{denominator:8,allocationData:[],active:0}},methods:{show:function(t){this.$modal.show(t)},setActive:function(t){this.active=t}},watch:{list:function(t){var e=this;this.allocationData=function(){for(var a=[],s=Math.ceil(t.length/e.denominator),i=1;i<=s;i++){for(var r=[],l=e.denominator*(i-1);l<e.denominator*i;l++){if(!t[l])break;r.push(t[l])}a.push(r)}return a}()}}},z=Y,H=Object(y["a"])(z,S,$,!1,null,null,null),Q=H.exports,R={name:"App",components:{Counts:P,ArticleArea:Q},data:function(){return{data:null}},mounted:function(){var t=this,e="post";p()({method:e,url:this.global.apiPath,data:v.a.stringify({action:"getAdmin"})}).then((function(e){Object.keys(e.data).length>0?t.data=e.data:(alert("取得資料錯誤"),console.log(e))})).catch((function(t){alert("取得資料失敗"),console.error(t)}))}},U=R,V=(a("a5d2"),Object(y["a"])(U,i,r,!1,null,null,null)),W=V.exports,X=a("1881"),Z=a.n(X),tt="api/index.php",et={kg:"海廢清除公斤數",percent:"永續拖鞋",company:"響應企業數",cleanBeach:"淨灘場數",bottles:"寶特瓶數(海廢+回收)",sliders:"專題報導",news:"最新消息",update:"更新",add:"新增"},at={apiPath:tt,titles:et};a("ba8c");s["a"].config.productionTip=!1,s["a"].use(Z.a),s["a"].prototype.global=at,new s["a"]({render:function(t){return t(W)}}).$mount("#app")},a5d2:function(t,e,a){"use strict";a("5465")},ba8c:function(t,e,a){}});
//# sourceMappingURL=app.8e6a1d91.js.map